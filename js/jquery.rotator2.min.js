(function(c){c.rotator2=function(g,j){var a=this,b;a.$el=c(g);a.currentPage=1;a.timer=null;a.animating=!1;a.playing=!1;a.items=[];a.init=function(){if(a.$el.data("rotator"))return!1;a.$el.data("rotator",a);a.options=b=c.extend({},c.rotator2.defaults,j);b.blocksChangePerPage>b.blocksPerScreen&&(b.blocksChangePerPage=b.blocksPerScreen);a.$items=a.$el.find(b.itemsSelector);a.items=a.$items.toArray();a.itemsCount=a.$items.length;a.containerName="b-rotator__container";a.containerSelector="."+a.containerName;
a.afterAnimateCss={"margin-left":"-100%",left:"0%"};a.wrapper=a.$el.closest(".b-rotator-wrapper");var d=[];b.prev&&d.push(b.prev);b.next&&d.push(b.next);b.buttonsSelector=d.join(", ");b.blocksPerScreen>b.itemsCount&&(b.blocksPerScreen=a.itemsCount);c.isFunction(c.easing[b.easing])||(b.easing="swing");a.pageCount=Math.ceil(a.itemsCount/b.blocksChangePerPage);a.blockCount=Math.ceil(a.itemsCount/b.blocksPerScreen)+1;a.containerWidth=400;a.itemsWidth=100/(4*b.blocksPerScreen);a.$items.each(function(a){c(this).data("index",
a+1).attr("index",a+1)}).css("width",a.itemsWidth+"%").wrapAll('<div style="width: '+a.containerWidth+'%;" class="'+a.containerName+'"/>');a.$container=a.$el.find(a.containerSelector);a.$el.css("overflow",b.containerOverflow);3<a.pageCount&&(a.rotateItems(b.startPage),a.refreshSlider(),a.$container.css({"margin-left":4*-a.itemsWidth*b.blocksPerScreen+"%"}));a.itemsCount<=b.blocksPerScreen?(a.$el.addClass("b-rotator-not-enough-slides"),a.wrapper.find(b.buttonsSelector).hide(),a.wrapper.find(b.navSelector).hide()):
(a.buildNextPrevButtons(),b.navSelector&&1<a.pageCount&&a.buildNavigation(),b.useSwipeTouch&&a.addSwipeTouchListener(),b.keyboardNavigation&&a.addKeyboardListener(),b.autoPlay&&(a.playing=!0,a.startStop()),b.pauseOnHover&&a.addOnHoverListener(),b.hashPrefix&&(a.addHashChangeListener(),c(window).trigger("hashchange")));b.autoWidthCheck&&(d=!!c.browser.opera,"opera"===b.autoWidthCheck?d&&a.checkResize():a.checkResize())};a.addHashChangeListener=function(){c(window).bind("hashchange",function(d){d=d.getState(b.hashPrefix,
!0)||1;a.gotoPage(d)})};a.addSwipeTouchListener=function(){c(this).bind({swipeleft:function(){a.goNextPage()},swiperight:function(){a.goPrevPage()}})};a.addKeyboardListener=function(){c(document).keydown(function(b){37===b.which?a.goPrevPage():39===b.which&&a.goNextPage()})};a.addOnHoverListener=function(){var d=[];d.push(a);b.prev&&d.push(b.prev);b.next&&d.push(b.next);b.navSelector&&d.push(b.navSelector);c(d.join(", ")).hover(function(){a.clearTimer()},function(){a.startStop()})};a.buildNavigation=
function(){for(var d=a.pageCount,f,e,h=a.wrapper.find(b.navSelector),i=0;i<d;i++){f=[];e=b.blocksChangePerPage;for(var g=i*e+1;g<(i+1)*e+1;g++)f.push(g);f=c(b.navPageTemplate.replace("$i",i+1)).data("page",i).data("items",f);b.hashPrefix&&f.attr("href","#"+b.hashPrefix+"="+(i+1));b.navDrawPageNumber&&f.text(i+1);h.append(f)}h.find("a").first().addClass("Active");h.delegate("a","click",function(){var d=c(this);if(a.animating||d.hasClass("Active"))return!1;var f=d.data("items")[0],e=(f-1)/b.blocksChangePerPage+
1;h.not(d).removeClass("Active");d.addClass("Active");b.hashPrefix&&a.updateHashUrl(f);a.gotoPage(e);return!1})};a.buildNextPrevButtons=function(){b.hashPrefix&&a.updateNextPrevLinks();a.wrapper.find(b.buttonsSelector).css("visibility","visible").click(function(){c(this).is(b.prev)?a.goPrevPage():a.goNextPage();return!1})};a.startStop=function(){!0!==a.playing&&(a.playing=!1);a.playing?(a.clearTimer(),a.timer=setTimeout(function(){a.goNextPage()},b.delay+b.duration)):a.clearTimer()};a.clearTimer=
function(){a.timer&&(clearTimeout(a.timer),a.timer=null)};a.updateHashUrl=function(a){var f={};f[b.hashPrefix]=a;c.bbq.pushState(f)};a.updateNextPrevLinks=function(){var d=1<a.currentPage?a.currentPage-1:a.pageCount,f=a.currentPage<a.pageCount?a.currentPage+1:1;c(b.prev).attr("href","#"+b.hashPrefix+"="+d);c(b.next).attr("href","#"+b.hashPrefix+"="+f)};a.gotoPage=function(d){if(!(a.animating||a.currentPage===d)){a.animating=!0;a.clearTimer();a.wrapper.find(b.navSelector).find("a").eq(d-1).addClass("Active");
var c,e,h=a.$container,g=a.currentPage;e=Math.abs(g-d)*b.blocksChangePerPage;e=e>a.itemsCount/2?a.itemsCount-e:e;c=((g-1)*b.blocksChangePerPage+1+e)%a.itemsCount;c=0===c?a.itemsCount:c;c=c!==(d-1)*b.blocksChangePerPage+1;e===a.itemsCount/2&&(c=!1);d=parseInt(d,10);a.nextPage=d;if(c&&e>b.blocksPerScreen)h.find(b.itemsSelector).slice(-b.blocksPerScreen).remove(),a.rotateItems((d-1)*b.blocksChangePerPage+1),d=a.items.slice(b.blocksPerScreen,2*b.blocksPerScreen),d.length===b.blocksPerScreen&&(h.prepend(d),
d=3*b.blocksPerScreen-h.find(b.itemsSelector).length,0<d&&h.prepend(a.items.slice(b.blocksPerScreen-d,2*b.blocksPerScreen-d))),d=3*b.blocksPerScreen-h.find(b.itemsSelector).length,h.css("margin-left",-200-100*(d/b.blocksPerScreen)+"%");else if(!c&&e>2*b.blocksPerScreen-1)a.rotateItems((d-1)*b.blocksChangePerPage+1),h.find(b.itemsSelector).slice(0,b.blocksPerScreen).remove(),h.append(a.items.slice(b.blocksPerScreen,2*b.blocksPerScreen)),h.css("margin-left","0%");else{if(!c&&e>b.blocksPerScreen&&e<=
2*b.blocksPerScreen){a.rotateItems((d-1)*b.blocksChangePerPage+1);var d=Math.abs(e)%b.blocksPerScreen,j=h.find(b.itemsSelector).slice(0,d);h.find(b.itemsSelector).slice(0,d).remove();h.append(j);d=-100+(c?-100:100)*(d/b.blocksPerScreen)}else a.rotateItems((d-1)*b.blocksChangePerPage+1),a.refreshSlider(),d=-100+(c?-100:100)*(e/b.blocksPerScreen);h.css("margin-left",d+"%")}if(b.onBeforeAnimation&&"function"===typeof b.onBeforeAnimation)b.onBeforeAnimation(a.nextPage);a.animateRotator(g,e,c);a.startStop()}};
a.animateRotator=function(d,c,e){d=100*Math.min(c,2*b.blocksPerScreen)/b.blocksPerScreen;a.$container.animate({left:(e?"+":"-")+"="+d+"%"},{duration:b.duration,easing:b.easing,complete:function(){a.onAnimationComplete()}})};a.onAnimationComplete=function(){var d=a.$container,c=a.wrapper.find(b.navSelector).find("a");a.refreshSlider();d.css(a.afterAnimateCss);a.rotateItems(a.nextPage*b.blocksChangePerPage);a.currentPage=a.nextPage;b.navSelector&&c.removeClass("Active").eq(a.currentPage-1).addClass("Active");
b.hashPrefix&&a.updateNextPrevLinks();a.animating=!1;if(b.onMoveComplete&&"function"===typeof b.onMoveComplete)b.onMoveComplete(a.currentPage)};a.refreshSlider=function(){a.$container.find(b.itemsSelector).remove();a.$container.append(a.items.slice(0,3*b.blocksPerScreen));a.items.length<3*b.blocksPerScreen&&c(a.items.slice(0,b.blocksPerScreen)).clone().appendTo(a.$container)};a.goNextPage=function(){var d=a.currentPage<a.pageCount?a.currentPage+1:1;b.hashPrefix&&a.updateHashUrl(d);a.gotoPage(d)};
a.goPrevPage=function(){var d=1<a.currentPage?a.currentPage-1:a.pageCount;b.hashPrefix&&a.updateHashUrl(d);a.gotoPage(d)};a.centerOnCurrentSlide=function(){var b=a.currentPage,c=b+3,c=c>a.itemsCount-1||1>c?Math.abs(a.itemsCount-Math.abs(c)):c;if(b<c-1||b>c+1)b=3<b?b-3:a.itemsCount-Math.abs(b-3),a.gotoPage(b)};a.rotateItems=function(d){var f=3*b.blocksPerScreen-a.items.length,e=a.items.slice(0,f);d&&(d-=c(a.items.slice(b.blocksPerScreen,b.blocksPerScreen+1)).attr("index"),a.items=a.items.slice(d,a.items.length).concat(a.items.slice(0,
d)));0<f&&c(e).clone().appendTo(a.$container)};a.checkResize=function(){clearTimeout(a.resizeTimer);a.resizeTimer=setTimeout(function(){var c=4*a.$container.find(b.itemsSelector).first().width()*b.blocksPerScreen,f=a.$container.outerWidth();(c>f+10||c<f-10)&&a.$items.css("width",f/(4*b.blocksPerScreen))},750)};a.init()};c.rotator2.defaults={itemsSelector:".b-rotator__item",prev:".b-rotator__prev",next:".b-rotator__next",blocksPerScreen:1,blocksChangePerPage:1,duration:1E3,easing:"swing",startPage:1,
navSelector:".b-rotator__paging",navDrawPageNumber:!1,navPageTemplate:'<a href="#$n"><span>$i</span></a>',keyboardNavigation:!1,onBeforeAnimation:!1,onMoveComplete:!1,autoPlay:!1,delay:6E3,pauseOnHover:!1,useSwipeTouch:!1,hashPrefix:!1,lazyLoad:!1,autoWidthCheck:"opera",containerOverflow:"hidden"};c.fn.rotator2=function(g){if((typeof g).match("object|undefined"))return this.each(function(){new c.rotator2(this,g)});if(/\d/.test(g)&&!isNaN(g))return this.each(function(){var j=c.data(this,"rotator");
if(j){var a="number"===typeof g?g:parseInt(c.trim(g),10);1>a||a>j.itemsCount||j.gotoPage(a)}})}})(jQuery);
$(document).ready(function(){$(".b-rotator-data").each(function(){var c=$(this),g={itemsSelector:c.data("items"),prev:c.data("prev"),next:c.data("next"),blocksPerScreen:c.data("perscreen"),blocksChangePerPage:c.data("perpage"),duration:c.data("duration"),easing:c.data("easing"),navSelector:c.data("nav"),navDrawPageNumber:c.data("navpagenumber"),navPageTemplate:c.data("navtemplate"),keyboardNavigation:c.data("keyboard"),onBeforeAnimation:c.data("before"),onMoveComplete:c.data("complete"),autoPlay:c.data("auto"),
delay:c.data("delay"),pauseOnHover:c.data("pauseonhover"),useSwipeTouch:c.data("swipe"),hashPrefix:c.data("hash"),lazyLoad:c.data(""),startPage:c.data("start"),autoWidthCheck:c.data("widthcheck")};c.rotator2(g)})});
